<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BELLABONA | Agentic Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600;800&display=swap"
        rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bella: '#00a859',
                        dark: '#0a0a0a',
                        card: '#111',
                    },
                    fontFamily: {
                        mono: ['"JetBrains Mono"', 'monospace'],
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #050505;
            color: #e5e5e5;
        }

        .glass {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .terminal-text {
            color: #00a859;
            text-shadow: 0 0 5px rgba(0, 168, 89, 0.5);
        }

        .scan-line {
            width: 100%;
            height: 2px;
            background: rgba(0, 168, 89, 0.3);
            position: absolute;
            top: 0;
            left: 0;
            animation: scan 3s linear infinite;
        }

        @keyframes scan {
            0% {
                top: 0%;
            }

            100% {
                top: 100%;
            }
        }

        .blink {
            animation: blink 1s infinite;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }
    </style>
</head>

<body class="min-h-screen flex flex-col items-center justify-center p-4 selection:bg-bella selection:text-black">

    <!-- Agent UI Container -->
    <div
        class="w-full max-w-5xl glass rounded-2xl overflow-hidden shadow-2xl relative min-h-[600px] flex flex-col md:flex-row">

        <!-- Sidebar / Console -->
        <div class="w-full md:w-1/3 border-r border-white/5 bg-black/40 flex flex-col p-6">
            <div class="flex items-center gap-3 mb-8">
                <div class="w-3 h-3 rounded-full bg-red-500"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                <div class="w-3 h-3 rounded-full bg-green-500"></div>
                <div class="ml-auto font-mono text-xs text-gray-500">AGENT_V2.2 (DE_CORP)</div>
            </div>

            <h1 class="font-bold text-2xl tracking-tighter mb-1 text-white">BELLABONA<span class="text-bella">.AI</span>
            </h1>
            <p class="text-xs text-gray-500 mb-8 font-mono">Marketing Intelligence Node</p>

            <!-- Agent Logs -->
            <div id="agent-logs"
                class="flex-1 font-mono text-xs space-y-2 overflow-y-auto max-h-[300px] text-gray-400 mb-6 p-2 rounded border border-white/5 bg-black/20">
                <div class="text-bella">> System Initialized...</div>
                <div>> Connected to Knowledge Base: Bellabona.com</div>
                <div>> Loaded Context: Corporate Canteen, Germany</div>
                <div>> Waiting for directive...</div>
            </div>

            <!-- Input Area -->
            <div class="mt-auto">
                <label class="text-xs font-bold text-gray-300 mb-2 block uppercase tracking-wider">Directive</label>
                <div class="relative">
                    <input type="text" id="prompt"
                        class="w-full bg-black/50 border border-white/10 rounded-lg p-3 pr-10 text-white text-sm focus:border-bella focus:outline-none focus:ring-1 focus:ring-bella transition-all font-sans"
                        placeholder="e.g. Summer salad promo...">
                    <button id="send-btn" class="absolute right-2 top-2 text-bella hover:text-white transition-colors">
                        ‚û§
                    </button>
                </div>
            </div>
        </div>

        <!-- Visual / Workspace -->
        <div class="w-full md:w-2/3 bg-[#0a0a0a] relative flex flex-col">

            <!-- Result Canvas -->
            <div id="canvas-area"
                class="flex-1 flex items-center justify-center p-8 bg-grid-white/[0.02] relative overflow-hidden group">
                <!-- Placeholder State -->
                <div id="placeholder" class="text-center opacity-30">
                    <div class="text-6xl mb-4">‚ùñ</div>
                    <div class="font-mono text-sm">NO_ASSET_LOADED</div>
                </div>

                <!-- Image Result -->
                <img id="result-img"
                    class="hidden max-w-full max-h-[500px] rounded shadow-2xl border border-white/10 transition-transform duration-700 hover:scale-[1.01]" />

                <!-- Loading Overlay -->
                <div id="loading"
                    class="hidden absolute inset-0 bg-black/80 flex items-center justify-center flex-col z-10">
                    <div class="w-16 h-16 border-4 border-bella border-t-transparent rounded-full animate-spin mb-4">
                    </div>
                    <div class="font-mono text-bella text-xs animate-pulse">GENERATING_PIXELS...</div>
                </div>
            </div>

            <!-- Editor Toolbar (Bottom) -->
            <div id="editor-bar"
                class="h-16 border-t border-white/5 bg-white/5 backdrop-blur flex items-center px-6 gap-4 opacity-0 pointer-events-none transition-opacity duration-300">
                <span class="text-xs font-mono text-gray-400 uppercase mr-2">Refine:</span>

                <button onclick="refine('make it brighter')"
                    class="px-3 py-1 bg-white/10 hover:bg-white/20 rounded text-xs text-white transition-all">‚òÄ
                    Brighter</button>
                <button onclick="refine('add corporate working people')"
                    class="px-3 py-1 bg-white/10 hover:bg-white/20 rounded text-xs text-white transition-all">üë•
                    +People</button>
                <button onclick="refine('minimalist style')"
                    class="px-3 py-1 bg-white/10 hover:bg-white/20 rounded text-xs text-white transition-all">‚ú®
                    Minimal</button>
                <button onclick="refine('high contrast, professional food photography')"
                    class="px-3 py-1 bg-white/10 hover:bg-white/20 rounded text-xs text-white transition-all">üì∏
                    Pro-Cam</button>

                <div class="ml-auto flex gap-2">
                    <a id="download-link" href="#" target="_blank" class="text-bella hover:text-white"><svg
                            class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                        </svg></a>
                </div>
            </div>

        </div>
    </div>

    <script>
        const logs = document.getElementById('agent-logs');
        const img = document.getElementById('result-img');
        const editorBar = document.getElementById('editor-bar');

        let currentPrompt = "";

        // --- BELLABONA BRAND CONTEXT ---
        const BRAND_CONTEXT = "Bellabona Style: High-quality corporate lunch delivery in Germany. Fresh, healthy chef-prepared food in sustainable eco-friendly packaging. Modern german office setting. Professional lighting, 8k resolution, photorealistic app advertisement. ";

        function addLog(text, type = 'neutral') {
            const div = document.createElement('div');
            const time = new Date().toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' });
            div.innerHTML = `<span class="opacity-30">[${time}]</span> ${text}`;
            if (type === 'success') div.classList.add('text-bella');
            if (type === 'process') div.classList.add('text-yellow-500');
            logs.appendChild(div);
            logs.scrollTop = logs.scrollHeight;
        }

        async function generate(promptText) {
            // Merge User Prompt with Brand Context automatically
            const finalPrompt = BRAND_CONTEXT + promptText;
            currentPrompt = finalPrompt;

            document.getElementById('loading').classList.remove('hidden');
            document.getElementById('placeholder').classList.add('hidden');
            editorBar.classList.remove('opacity-100', 'pointer-events-auto');
            editorBar.classList.add('opacity-0', 'pointer-events-none');

            addLog(`Directive: "${promptText}"`);
            addLog(`> Accessing Brand Database: [BELLABONA_DE]`, 'process');

            // Simulating Agent "Thinking" steps
            setTimeout(() => addLog("> Applying Sustainability Guidelines...", 'process'), 500);
            setTimeout(() => addLog("> Contextualizing for German Office Market...", 'process'), 1200);
            setTimeout(() => addLog("> Rendering final asset...", 'process'), 2000);

            // Real Generation (Pollinations)
            const seed = Math.floor(Math.random() * 10000);
            const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(finalPrompt)}?nologo=true&seed=${seed}`;

            // Preload
            const tempImg = new Image();
            tempImg.onload = () => {
                img.src = url;
                img.classList.remove('hidden');
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('download-link').href = url;

                addLog("> ASSET_GENERATED_SUCCESSFULLY", 'success');

                // Show Editor
                editorBar.classList.remove('opacity-0', 'pointer-events-none');
                editorBar.classList.add('opacity-100', 'pointer-events-auto');
            };
            tempImg.onerror = () => {
                addLog("> Error: Visual system failure", 'error');
                document.getElementById('loading').classList.add('hidden');
            }
            tempImg.src = url;
        }

        window.refine = function (modifier) {
            addLog(`> Refining: ${modifier}...`);
            // We append the modifier to the already Branded context
            generate(currentPrompt.replace(BRAND_CONTEXT, "") + ", " + modifier);
            // Note: Logic allows appending to previous prompt, but here we just re-run generate 
            // which re-prepends brand context. The prompt passed to generate is just the user part + modifier.
        }

        document.getElementById('send-btn').addEventListener('click', () => {
            const val = document.getElementById('prompt').value;
            if (val) generate(val);
        });

        document.getElementById('prompt').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const val = document.getElementById('prompt').value;
                if (val) generate(val);
            }
        });
    </script>
</body>

</html>